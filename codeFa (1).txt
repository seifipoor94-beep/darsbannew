<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ù†ÛŒØ§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø±Ø³Ø¨Ø§Ù†</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #357ABD;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        * {
            font-family: 'Vazir', 'Segoe UI', Tahoma, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            padding-top: 20px;
        }
        
        .login-container {
            max-width: 500px;
            margin: 50px auto;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            border: none;
        }
        
        .card-header {
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
            font-weight: bold;
        }
        
        .nav-tabs .nav-link {
            color: #555;
            border: none;
            border-bottom: 3px solid transparent;
            margin: 0 5px;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: transparent;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .sidebar {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            height: fit-content;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: block;
            padding: 12px 15px;
            color: #555;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .sidebar-menu a:hover {
            background-color: #f0f2f6;
            color: var(--primary-color);
        }
        
        .sidebar-menu a.active {
            background-color: #e8f0fe;
            color: var(--primary-color);
            border-right: 4px solid var(--primary-color);
        }
        
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
        }
        
        .alert {
            border-radius: 8px;
            border: none;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .stat-box {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .score-input {
            width: 80px;
            text-align: center;
        }
        
        .badge-score {
            font-size: 0.9rem;
            padding: 5px 10px;
        }
        
        .report-card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border: 2px solid #eaeaea;
        }
        
        .report-header {
            text-align: center;
            border-bottom: 3px double #4A90E2;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .report-table th, .report-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        
        .report-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        .performance-level {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .level-excellent { background-color: #d4edda; color: #155724; }
        .level-good { background-color: #d1ecf1; color: #0c5460; }
        .level-average { background-color: #fff3cd; color: #856404; }
        .level-poor { background-color: #f8d7da; color: #721c24; }
        
        @media (max-width: 768px) {
            .sidebar {
                margin-bottom: 20px;
            }
        }
        
        /* ÙÙˆÙ†Øª ÙØ§Ø±Ø³ÛŒ */
        @font-face {
            font-family: 'Vazir';
            src: url('https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/Vazir.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø³Øªâ€ŒÚ†ÛŒÙ† */
        .form-control, .form-select {
            text-align: right;
        }
        
        .table th {
            text-align: right;
        }
        
        .modal-header .btn-close {
            margin: -0.5rem -0.5rem -0.5rem auto;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
        <div id="login-page" v-if="currentPage === 'login'">
            <div class="login-container">
                <div class="text-center mb-4">
                    <i class="fas fa-graduation-cap fa-3x text-primary mb-3"></i>
                    <h2>ğŸ’» ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø±Ø³Ø¨Ø§Ù†</h2>
                    <p class="text-muted">Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</p>
                </div>
                
                <div class="mb-3">
                    <label for="username" class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                    <input type="text" class="form-control" id="username" v-model="loginData.username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                </div>
                
                <div class="mb-4">
                    <label for="password" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                    <input type="password" class="form-control" id="password" v-model="loginData.password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                </div>
                
                <button class="btn btn-primary w-100 mb-3" @click="login">
                    <i class="fas fa-sign-in-alt me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
                </button>
                
                <div class="text-center mt-4">
                    <p class="text-muted">
                        <i class="fas fa-info-circle me-2"></i>
                        Ø¯Ø±Ø³Ø¨Ø§Ù†ØŒ Ù‡Ù…Ø±Ø§Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø´Ù…Ø§ â€” Ø·Ø±Ø§Ø­ÛŒâ€ŒØ´Ø¯Ù‡ ØªÙˆØ³Ø· ÙØ§Ø·Ù…Ù‡ Ø³ÛŒÙÛŒâ€ŒÙ¾ÙˆØ± ğŸ’™
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ -->
        <div id="dashboard" v-if="currentPage === 'dashboard'">
            <!-- Ù‡Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
            <div class="dashboard-header">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h3><i class="fas fa-user-circle me-2"></i>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ØŒ {{ currentUser.name }}</h3>
                        <p class="mb-0">
                            <i class="fas fa-user-tag me-2"></i>Ù†Ù‚Ø´: {{ currentUser.role }}
                            <span class="mx-3">|</span>
                            <i class="fas fa-school me-2"></i>{{ currentUser.school || 'Ø¨Ø¯ÙˆÙ† Ù…Ø¯Ø±Ø³Ù‡' }}
                        </p>
                    </div>
                    <div class="col-md-4 text-left">
                        <button class="btn btn-outline-light" @click="logout">
                            <i class="fas fa-sign-out-alt me-2"></i>Ø®Ø±ÙˆØ¬ Ø§Ø² Ø³Ø§Ù…Ø§Ù†Ù‡
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡ -->
            <div id="superadmin-panel" v-if="currentUser.role === 'Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡'">
                <h4 class="mb-4"><i class="fas fa-crown me-2"></i>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡</h4>
                
                <ul class="nav nav-tabs" id="superadminTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="schools-tab" data-bs-toggle="tab" data-bs-target="#schools" type="button" role="tab">Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¯Ø§Ø±Ø³</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</button>
                    </li>
                </ul>
                
                <div class="tab-content mt-4" id="superadminTabsContent">
                    <!-- ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø¯Ø§Ø±Ø³ -->
                    <div class="tab-pane fade show active" id="schools" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-plus-circle me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¯Ø±Ø³Ù‡ Ø¬Ø¯ÛŒØ¯
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="newSchoolName" class="form-label">Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡ Ø¬Ø¯ÛŒØ¯:</label>
                                            <input type="text" class="form-control" id="newSchoolName" v-model="newSchool.name" placeholder="Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                                        </div>
                                        <button class="btn btn-primary" @click="addSchool">
                                            <i class="fas fa-plus me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¯Ø±Ø³Ù‡
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-list me-2"></i>Ù„ÛŒØ³Øª Ù…Ø¯Ø§Ø±Ø³ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡</th>
                                                        <th>Ú©Ø¯ Ù…Ø¯Ø±Ø³Ù‡</th>
                                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="school in schools" :key="school.id">
                                                        <td>{{ school.name }}</td>
                                                        <td>{{ school.code }}</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary me-2" @click="editSchool(school)">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button class="btn btn-sm btn-outline-danger" @click="deleteSchool(school.id)">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
                    <div class="tab-pane fade" id="users" role="tabpanel">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-users me-2"></i>Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø³ÛŒØ³ØªÙ…
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th>
                                                        <th>Ù†Ø§Ù… Ú©Ø§Ù…Ù„</th>
                                                        <th>Ù†Ù‚Ø´</th>
                                                        <th>Ù…Ø¯Ø±Ø³Ù‡</th>
                                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="user in users" :key="user.id">
                                                        <td>{{ user.username }}</td>
                                                        <td>{{ user.fullname }}</td>
                                                        <td>{{ user.role }}</td>
                                                        <td>{{ user.school }}</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary me-2" @click="editUser(user)">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button class="btn btn-sm btn-outline-danger" @click="deleteUser(user.id)">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-user-plus me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="newUsername" class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                                            <input type="text" class="form-control" id="newUsername" v-model="newUser.username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
                                        </div>
                                        <div class="mb-3">
                                            <label for="newPassword" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±:</label>
                                            <input type="password" class="form-control" id="newPassword" v-model="newUser.password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
                                        </div>
                                        <div class="mb-3">
                                            <label for="newFullname" class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„:</label>
                                            <input type="text" class="form-control" id="newFullname" v-model="newUser.fullname" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
                                        </div>
                                        <div class="mb-3">
                                            <label for="newRole" class="form-label">Ù†Ù‚Ø´:</label>
                                            <select class="form-select" id="newRole" v-model="newUser.role">
                                                <option value="Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±">Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</option>
                                                <option value="Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡">Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡</option>
                                                <option value="Ù…Ø¹Ø§ÙˆÙ†">Ù…Ø¹Ø§ÙˆÙ†</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="newUserSchool" class="form-label">Ù…Ø¯Ø±Ø³Ù‡:</label>
                                            <select class="form-select" id="newUserSchool" v-model="newUser.school">
                                                <option v-for="school in schools" :value="school.name">{{ school.name }}</option>
                                            </select>
                                        </div>
                                        <button class="btn btn-primary w-100" @click="addUser">
                                            <i class="fas fa-plus me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ØªØ¨ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ -->
                    <div class="tab-pane fade" id="reports" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="stat-box">
                                    <span class="stat-number">{{ schools.length }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ù…Ø¯Ø§Ø±Ø³</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="stat-box">
                                    <span class="stat-number">{{ users.length }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-2"></i>Ù†Ù…ÙˆØ¯Ø§Ø± ØªÙˆØ²ÛŒØ¹ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù‚Ø´
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="roleDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡ -->
            <div id="school-admin-panel" v-if="currentUser.role === 'Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡'">
                <h4 class="mb-4"><i class="fas fa-school me-2"></i>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡</h4>
                
                <ul class="nav nav-tabs" id="schoolAdminTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="teachers-tab" data-bs-toggle="tab" data-bs-target="#teachers" type="button" role="tab">Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù†</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="teacher-reports-tab" data-bs-toggle="tab" data-bs-target="#teacher-reports" type="button" role="tab">Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù†</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="school-stats-tab" data-bs-toggle="tab" data-bs-target="#school-stats" type="button" role="tab">Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ù…Ø¯Ø±Ø³Ù‡</button>
                    </li>
                </ul>
                
                <div class="tab-content mt-4" id="schoolAdminTabsContent">
                    <!-- ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù† -->
                    <div class="tab-pane fade show active" id="teachers" role="tabpanel">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chalkboard-teacher me-2"></i>Ù„ÛŒØ³Øª Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù† Ù…Ø¯Ø±Ø³Ù‡
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th>
                                                        <th>Ù†Ø§Ù… Ú©Ø§Ù…Ù„</th>
                                                        <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="teacher in schoolTeachers" :key="teacher.id">
                                                        <td>{{ teacher.username }}</td>
                                                        <td>{{ teacher.fullname }}</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary me-2">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                            <button class="btn btn-sm btn-outline-danger">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-user-plus me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ù…ÙˆØ²Ú¯Ø§Ø± Ø¬Ø¯ÛŒØ¯
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="teacherUsername" class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±:</label>
                                            <input type="text" class="form-control" id="teacherUsername" v-model="newTeacher.username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
                                        </div>
                                        <div class="mb-3">
                                            <label for="teacherPassword" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±:</label>
                                            <input type="password" class="form-control" id="teacherPassword" v-model="newTeacher.password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
                                        </div>
                                        <div class="mb-3">
                                            <label for="teacherFullname" class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±:</label>
                                            <input type="text" class="form-control" id="teacherFullname" v-model="newTeacher.fullname" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
                                        </div>
                                        <button class="btn btn-primary w-100" @click="addTeacher">
                                            <i class="fas fa-plus me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ØªØ¨ Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù† -->
                    <div class="tab-pane fade" id="teacher-reports" role="tabpanel">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="fas fa-filter me-2"></i>ÙÛŒÙ„ØªØ± Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label for="selectTeacher" class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±:</label>
                                            <select class="form-select" id="selectTeacher" v-model="selectedTeacher">
                                                <option v-for="teacher in schoolTeachers" :value="teacher.fullname">{{ teacher.fullname }}</option>
                                            </select>
                                        </div>
                                        <button class="btn btn-primary w-100" @click="loadTeacherReport">
                                            <i class="fas fa-chart-line me-2"></i>Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-8">
                                <div v-if="teacherReportData" class="card">
                                    <div class="card-header">
                                        <i class="fas fa-chart-pie me-2"></i>Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±: {{ selectedTeacher }}
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-4">
                                            <div class="col-md-6">
                                                <div class="stat-box">
                                                    <span class="stat-number">{{ teacherReportData.studentCount }}</span>
                                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="stat-box">
                                                    <span class="stat-number">{{ teacherReportData.averageGrade }}</span>
                                                    <span class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="chart-container">
                                            <canvas id="teacherPerformanceChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ØªØ¨ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ù…Ø¯Ø±Ø³Ù‡ -->
                    <div class="tab-pane fade" id="school-stats" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="stat-box">
                                    <span class="stat-number">{{ schoolStats.teacherCount }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù†</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="stat-box">
                                    <span class="stat-number">{{ schoolStats.studentCount }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-2"></i>Ù†Ù…ÙˆØ¯Ø§Ø± ØªÙˆØ²ÛŒØ¹ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾Ø§ÛŒÙ‡
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="gradeDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ù†Ù„ Ù…Ø¹Ø§ÙˆÙ† Ù…Ø¯Ø±Ø³Ù‡ -->
            <div id="assistant-panel" v-if="currentUser.role === 'Ù…Ø¹Ø§ÙˆÙ†'">
                <h4 class="mb-4"><i class="fas fa-clipboard-list me-2"></i>Ù¾Ù†Ù„ Ù…Ø¹Ø§ÙˆÙ† Ù…Ø¯Ø±Ø³Ù‡</h4>
                
                <div class="row">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-chart-line me-2"></i>Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù†
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Ù†Ø§Ù… Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</th>
                                                <th>ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</th>
                                                <th>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</th>
                                                <th>Ø¹Ù…Ù„Ú©Ø±Ø¯</th>
                                                <th>Ø¬Ø²Ø¦ÛŒØ§Øª</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="teacher in schoolTeachers" :key="teacher.id">
                                                <td>{{ teacher.fullname }}</td>
                                                <td>{{ Math.floor(Math.random() * 30) + 10 }}</td>
                                                <td>{{ (Math.random() * 2 + 2).toFixed(1) }}</td>
                                                <td>
                                                    <span class="badge bg-success">Ø®ÙˆØ¨</span>
                                                </td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-eye me-1"></i>Ù…Ø´Ø§Ù‡Ø¯Ù‡
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-chart-pie me-2"></i>Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ù…Ø¯Ø±Ø³Ù‡
                            </div>
                            <div class="card-body">
                                <div class="stat-box mb-3">
                                    <span class="stat-number">{{ schoolStats.teacherCount }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±Ø§Ù†</span>
                                </div>
                                <div class="stat-box mb-3">
                                    <span class="stat-number">{{ schoolStats.studentCount }}</span>
                                    <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-number">96%</span>
                                    <span class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø±Ø¶Ø§ÛŒØª</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <i class="fas fa-bell me-2"></i>Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ø®ÛŒØ±
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Ø¬Ù„Ø³Ù‡ Ù…Ø¹Ù„Ù…Ø§Ù† Ø±ÙˆØ² Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Ø³Ø§Ø¹Øª Û±Û° ØµØ¨Ø­
                                </div>
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    Ù…Ù‡Ù„Øª Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù‡ÙØªÙ‡
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ù†Ù„ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø± -->
            <div id="teacher-panel" v-if="currentUser.role === 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±'">
                <h4 class="mb-4"><i class="fas fa-chalkboard-teacher me-2"></i>Ù¾Ù†Ù„ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</h4>
                
                <div class="row">
                    <div class="col-md-3">
                        <div class="sidebar">
                            <ul class="sidebar-menu">
                                <li>
                                    <a href="#" :class="{active: teacherActiveTab === 'management'}" @click="teacherActiveTab = 'management'">
                                        <i class="fas fa-edit me-2"></i>Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø±Ù‡ Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                                    </a>
                                </li>
                                <li>
                                    <a href="#" :class="{active: teacherActiveTab === 'reports'}" @click="teacherActiveTab = 'reports'">
                                        <i class="fas fa-chart-bar me-2"></i>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ÙØ±Ø¯ÛŒ
                                    </a>
                                </li>
                                <li>
                                    <a href="#" :class="{active: teacherActiveTab === 'overall'}" @click="teacherActiveTab = 'overall'">
                                        <i class="fas fa-chart-line me-2"></i>Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ú©Ù„Ø§Ø³
                                    </a>
                                </li>
                                <li>
                                    <a href="#" :class="{active: teacherActiveTab === 'enter-scores'}" @click="teacherActiveTab = 'enter-scores'">
                                        <i class="fas fa-pen-alt me-2"></i>Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="col-md-9">
                        <!-- Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø±Ù‡ Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² -->
                        <div v-if="teacherActiveTab === 'management'">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-user-graduate me-2"></i>Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                                                    <th>Ù¾Ø§ÛŒÙ‡</th>
                                                    <th>Ú©Ù„Ø§Ø³</th>
                                                    <th>Ù…Ø¯Ø±Ø³Ù‡</th>
                                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="student in teacherStudents" :key="student.id">
                                                    <td>{{ student.name }}</td>
                                                    <td>{{ student.grade }}</td>
                                                    <td>{{ student.class }}</td>
                                                    <td>{{ student.school }}</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary me-2" @click="viewStudentScores(student)">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                        <button class="btn btn-sm btn-outline-danger" @click="deleteStudent(student.id)">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="mt-4">
                                        <h5><i class="fas fa-plus-circle me-2"></i>Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¬Ø¯ÛŒØ¯</h5>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="mb-3">
                                                    <label for="studentName" class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</label>
                                                    <input type="text" class="form-control" id="studentName" v-model="newStudent.name" placeholder="Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="mb-3">
                                                    <label for="studentGrade" class="form-label">Ù¾Ø§ÛŒÙ‡:</label>
                                                    <select class="form-select" id="studentGrade" v-model="newStudent.grade">
                                                        <option>Ø§ÙˆÙ„</option>
                                                        <option>Ø¯ÙˆÙ…</option>
                                                        <option>Ø³ÙˆÙ…</option>
                                                        <option>Ú†Ù‡Ø§Ø±Ù…</option>
                                                        <option>Ù¾Ù†Ø¬Ù…</option>
                                                        <option>Ø´Ø´Ù…</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="mb-3">
                                                    <label for="studentClass" class="form-label">Ú©Ù„Ø§Ø³:</label>
                                                    <input type="text" class="form-control" id="studentClass" v-model="newStudent.class" placeholder="Ú©Ù„Ø§Ø³">
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary" @click="addStudent">
                                            <i class="fas fa-plus me-2"></i>Ø«Ø¨Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª -->
                        <div v-if="teacherActiveTab === 'enter-scores'">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-pen-alt me-2"></i>Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                                </div>
                                <div class="card-body">
                                    <div class="row mb-4">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="scoreLesson" class="form-label">Ø¯Ø±Ø³:</label>
                                                <select class="form-select" id="scoreLesson" v-model="scoreData.lesson">
                                                    <option value="Ø±ÛŒØ§Ø¶ÛŒ">Ø±ÛŒØ§Ø¶ÛŒ</option>
                                                    <option value="Ø¹Ù„ÙˆÙ…">Ø¹Ù„ÙˆÙ…</option>
                                                    <option value="Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ">Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ</option>
                                                    <option value="Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ">Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
                                                    <option value="Ù‡Ù†Ø±">Ù‡Ù†Ø±</option>
                                                    <option value="ÙˆØ±Ø²Ø´">ÙˆØ±Ø²Ø´</option>
                                                    <option value="Ù‚Ø±Ø¢Ù†">Ù‚Ø±Ø¢Ù†</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="scoreDate" class="form-label">ØªØ§Ø±ÛŒØ®:</label>
                                                <input type="date" class="form-control" id="scoreDate" v-model="scoreData.date">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                                                    <th>Ù¾Ø§ÛŒÙ‡</th>
                                                    <th>Ú©Ù„Ø§Ø³</th>
                                                    <th>Ù†Ù…Ø±Ù‡ (Û±-Û´)</th>
                                                    <th>Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯</th>
                                                    <th>Ø«Ø¨Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="student in teacherStudents" :key="student.id">
                                                    <td>{{ student.name }}</td>
                                                    <td>{{ student.grade }}</td>
                                                    <td>{{ student.class }}</td>
                                                    <td>
                                                        <input type="number" class="form-control score-input" 
                                                               min="1" max="4" step="0.5" 
                                                               v-model="studentScores[student.id]"
                                                               placeholder="Ù†Ù…Ø±Ù‡">
                                                    </td>
                                                    <td>
                                                        <span v-if="studentScores[student.id]" class="performance-level" 
                                                              :class="getPerformanceLevel(studentScores[student.id])">
                                                            {{ getPerformanceText(studentScores[student.id]) }}
                                                        </span>
                                                        <span v-else class="text-muted">--</span>
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-sm btn-primary" 
                                                                @click="submitScore(student.id, studentScores[student.id])"
                                                                :disabled="!studentScores[student.id] || studentScores[student.id] < 1 || studentScores[student.id] > 4">
                                                            <i class="fas fa-save"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <div class="alert alert-info mt-3">
                                        <i class="fas fa-info-circle me-2"></i>
                                        Ù†Ù…Ø±Ø§Øª Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û± ØªØ§ Û´ Ø¨Ø§Ø´Ù†Ø¯. Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Ù†Ù…Ø±Ø§Øª Ø«Ø¨Øª Ø´Ø¯Ù‡ -->
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-list-check me-2"></i>Ù†Ù…Ø±Ø§Øª Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø®ÛŒØ±
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                                                    <th>Ø¯Ø±Ø³</th>
                                                    <th>Ù†Ù…Ø±Ù‡</th>
                                                    <th>Ø³Ø·Ø­</th>
                                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-for="score in teacherScores.slice().reverse().slice(0, 10)" :key="score.id">
                                                    <td>{{ score.studentName }}</td>
                                                    <td>{{ score.lesson }}</td>
                                                    <td>
                                                        <strong>{{ score.score }}</strong>
                                                    </td>
                                                    <td>
                                                        <span class="performance-level" :class="getPerformanceLevel(score.score)">
                                                            {{ getPerformanceText(score.score) }}
                                                        </span>
                                                    </td>
                                                    <td>{{ score.date }}</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-danger" @click="deleteScore(score.id)">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ÙØ±Ø¯ÛŒ -->
                        <div v-if="teacherActiveTab === 'reports'">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-pie me-2"></i>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ÙØ±Ø¯ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                                </div>
                                <div class="card-body">
                                    <div class="row mb-4">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="reportStudent" class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</label>
                                                <select class="form-select" id="reportStudent" v-model="selectedReportStudent">
                                                    <option v-for="student in teacherStudents" :value="student">{{ student.name }}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="reportLesson" class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³:</label>
                                                <select class="form-select" id="reportLesson" v-model="selectedReportLesson">
                                                    <option value="Ø±ÛŒØ§Ø¶ÛŒ">Ø±ÛŒØ§Ø¶ÛŒ</option>
                                                    <option value="Ø¹Ù„ÙˆÙ…">Ø¹Ù„ÙˆÙ…</option>
                                                    <option value="Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ">Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ</option>
                                                    <option value="Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ">Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
                                                    <option value="Ù‡Ù…Ù‡ Ø¯Ø±ÙˆØ³">Ù‡Ù…Ù‡ Ø¯Ø±ÙˆØ³</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div v-if="selectedReportStudent">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="chart-container">
                                                    <canvas id="studentProgressChart"></canvas>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="chart-container">
                                                    <canvas id="studentPerformanceChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="text-center mt-4">
                                            <button class="btn btn-success" @click="generateStudentReport(selectedReportStudent)">
                                                <i class="fas fa-print me-2"></i>Ú†Ø§Ù¾ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ú©Ù„Ø§Ø³ -->
                        <div v-if="teacherActiveTab === 'overall'">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-bar me-2"></i>Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ Ú©Ù„Ø§Ø³
                                </div>
                                <div class="card-body">
                                    <div class="row mb-4">
                                        <div class="col-md-3">
                                            <div class="stat-box">
                                                <span class="stat-number">{{ teacherStudents.length }}</span>
                                                <span class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="stat-box">
                                                <span class="stat-number">{{ calculateClassAverage() }}</span>
                                                <span class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="stat-box">
                                                <span class="stat-number">{{ calculatePassPercentage() }}%</span>
                                                <span class="stat-label">Ù†Ø³Ø¨Øª Ù‚Ø¨ÙˆÙ„ÛŒ</span>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="stat-box">
                                                <span class="stat-number">{{ getTopStudent() }}</span>
                                                <span class="stat-label">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø±ØªØ±</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="chart-container">
                                        <canvas id="classOverallChart"></canvas>
                                    </div>
                                    
                                    <div class="text-center mt-4">
                                        <button class="btn btn-primary" @click="generateClassReport">
                                            <i class="fas fa-file-pdf me-2"></i>Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´ PDF Ú©Ù„ Ú©Ù„Ø§Ø³
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² -->
            <div id="student-panel" v-if="currentUser.role === 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²'">
                <h4 class="mb-4"><i class="fas fa-user-graduate me-2"></i>Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h4>
                
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-user-circle me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                            </div>
                            <div class="card-body">
                                <p><strong>Ù†Ø§Ù…:</strong> {{ currentUser.name }}</p>
                                <p><strong>Ù¾Ø§ÛŒÙ‡:</strong> Ø´Ø´Ù…</p>
                                <p><strong>Ú©Ù„Ø§Ø³:</strong> Û¶Û°Û²</p>
                                <p><strong>Ù…Ø¯Ø±Ø³Ù‡:</strong> Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ</p>
                                <p><strong>Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±:</strong> Ø³Ø±Ú©Ø§Ø± Ø®Ø§Ù†Ù… Ø§Ø­Ù…Ø¯ÛŒ</p>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <i class="fas fa-trophy me-2"></i>Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§
                            </div>
                            <div class="card-body">
                                <div class="alert alert-success">
                                    <i class="fas fa-award me-2"></i>
                                    Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø±ØªØ± Ù‡ÙØªÙ‡
                                </div>
                                <div class="alert alert-info">
                                    <i class="fas fa-star me-2"></i>
                                    Ù¾ÛŒØ´Ø±ÙØª Ø¯Ø±Ø³ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙˆØ¬Ù‡
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <i class="fas fa-chart-line me-2"></i>Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹
                            </div>
                            <div class="card-body">
                                <div class="stat-box mb-3">
                                    <span class="stat-number">{{ studentAverageGrade }}</span>
                                    <span class="stat-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-number">{{ getStudentRank() }}</span>
                                    <span class="stat-label">Ø±ØªØ¨Ù‡ Ø¯Ø± Ú©Ù„Ø§Ø³</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-table me-2"></i>Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ ØªØ­ØµÛŒÙ„ÛŒ
                            </div>
                            <div class="card-body">
                                <div id="reportCardContent">
                                    <div class="report-card">
                                        <div class="report-header">
                                            <h3>Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ ØªØ­ØµÛŒÙ„ÛŒ</h3>
                                            <h5>Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ Û±Û´Û°Û³-Û±Û´Û°Û²</h5>
                                            <p><strong>Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</strong> {{ currentUser.name }}</p>
                                            <p><strong>Ù…Ø¯Ø±Ø³Ù‡:</strong> Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ | <strong>Ù¾Ø§ÛŒÙ‡:</strong> Ø´Ø´Ù… | <strong>Ú©Ù„Ø§Ø³:</strong> Û¶Û°Û²</p>
                                        </div>
                                        
                                        <div class="table-responsive">
                                            <table class="report-table">
                                                <thead>
                                                    <tr>
                                                        <th>Ø¯Ø±Ø³</th>
                                                        <th>Ù†Ù…Ø±Ù‡</th>
                                                        <th>Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯</th>
                                                        <th>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ú©Ù„Ø§Ø³</th>
                                                        <th>Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ú©Ù„Ø§Ø³</th>
                                                        <th>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr v-for="(grade, index) in studentGrades" :key="index">
                                                        <td>{{ grade.lesson }}</td>
                                                        <td><strong>{{ grade.score }}</strong></td>
                                                        <td>
                                                            <span class="performance-level" :class="getPerformanceLevel(grade.score)">
                                                                {{ getPerformanceText(grade.score) }}
                                                            </span>
                                                        </td>
                                                        <td>{{ grade.classAverage }}</td>
                                                        <td>
                                                            <span :class="grade.comparison === 'Ø¨Ø§Ù„Ø§ØªØ±' ? 'text-success' : 'text-danger'">
                                                                {{ grade.comparison === 'Ø¨Ø§Ù„Ø§ØªØ±' ? 'â¬†ï¸ Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†' : 
                                                                   grade.comparison === 'Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±' ? 'â¬‡ï¸ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø§Ø² Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†' : 'âš–ï¸ Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø§ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†' }}
                                                            </span>
                                                        </td>
                                                        <td>{{ grade.teacherComment }}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                        <div class="row mt-4">
                                            <div class="col-md-6">
                                                <div class="chart-container">
                                                    <canvas id="studentGradesChart"></canvas>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="chart-container">
                                                    <canvas id="studentComparisonChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5>Ø®Ù„Ø§ØµÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯:</h5>
                                            <p>{{ getStudentSummary() }}</p>
                                        </div>
                                        
                                        <div class="mt-4 text-center">
                                            <p><strong>Ù…Ù‡Ø± Ùˆ Ø§Ù…Ø¶Ø§ÛŒ Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡:</strong></p>
                                            <p>_________________________</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <button class="btn btn-primary btn-lg" @click="downloadReportCard">
                                        <i class="fas fa-download me-2"></i>Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ PDF
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø¯Ø±Ø³Ù‡ -->
    <div class="modal fade" id="editSchoolModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø¯Ø±Ø³Ù‡</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="editSchoolName" class="form-label">Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡:</label>
                        <input type="text" class="form-control" id="editSchoolName" v-model="editingSchool.name">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ù„ØºÙˆ</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" @click="updateSchool">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø± -->
    <div class="modal fade" id="editUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø±</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="editUsername" class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ:</label>
                        <input type="text" class="form-control" id="editUsername" v-model="editingUser.username">
                    </div>
                    <div class="mb-3">
                        <label for="editFullname" class="form-label">Ù†Ø§Ù… Ú©Ø§Ù…Ù„:</label>
                        <input type="text" class="form-control" id="editFullname" v-model="editingUser.fullname">
                    </div>
                    <div class="mb-3">
                        <label for="editRole" class="form-label">Ù†Ù‚Ø´:</label>
                        <select class="form-select" id="editRole" v-model="editingUser.role">
                            <option value="Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±">Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±</option>
                            <option value="Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡">Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡</option>
                            <option value="Ù…Ø¹Ø§ÙˆÙ†">Ù…Ø¹Ø§ÙˆÙ†</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editUserSchool" class="form-label">Ù…Ø¯Ø±Ø³Ù‡:</label>
                        <select class="form-select" id="editUserSchool" v-model="editingUser.school">
                            <option v-for="school in schools" :value="school.name">{{ school.name }}</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ù„ØºÙˆ</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" @click="updateUser">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.js"></script>
    <script>
        const { createApp } = Vue;
        const { jsPDF } = window.jspdf;
        
        createApp({
            data() {
                return {
                    currentPage: 'login',
                    currentUser: {
                        username: '',
                        name: '',
                        role: '',
                        school: ''
                    },
                    loginData: {
                        username: '',
                        password: ''
                    },
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡
                    schools: [
                        { id: 1, name: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ', code: 'SCH001' },
                        { id: 2, name: 'Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ù†Ù…ÙˆÙ†Ù‡ Ø¯ÙˆÙ„ØªÛŒ Ø§Ù…Ø§Ù… Ø®Ù…ÛŒÙ†ÛŒ', code: 'SCH002' },
                        { id: 3, name: 'Ù…Ø¯Ø±Ø³Ù‡ ØºÛŒØ±Ø§Ù†ØªÙØ§Ø¹ÛŒ Ø¹Ù„Ù… Ùˆ Ø§Ø¯Ø¨', code: 'SCH003' }
                    ],
                    users: [
                        { id: 1, username: 'admin', fullname: 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…', role: 'Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡', school: '' },
                        { id: 2, username: 'ahmadi', fullname: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ', role: 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 3, username: 'karimi', fullname: 'Ù…Ø­Ù…Ø¯ Ú©Ø±ÛŒÙ…ÛŒ', role: 'Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 4, username: 'mohammadi', fullname: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', role: 'Ù…Ø¹Ø§ÙˆÙ†', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' }
                    ],
                    newSchool: { name: '' },
                    newUser: { username: '', password: '', fullname: '', role: 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±', school: '' },
                    editingSchool: { id: null, name: '' },
                    editingUser: { id: null, username: '', fullname: '', role: '', school: '' },
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡
                    schoolTeachers: [
                        { id: 1, username: 'ahmadi', fullname: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ' },
                        { id: 2, username: 'rezaei', fullname: 'Ù…Ø±ÛŒÙ… Ø±Ø¶Ø§ÛŒÛŒ' },
                        { id: 3, username: 'hosseini', fullname: 'Ø³Ø¹ÛŒØ¯ Ø­Ø³ÛŒÙ†ÛŒ' }
                    ],
                    newTeacher: { username: '', password: '', fullname: '' },
                    selectedTeacher: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ',
                    teacherReportData: null,
                    schoolStats: { teacherCount: 12, studentCount: 350 },
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±
                    teacherActiveTab: 'management',
                    teacherStudents: [
                        { id: 1, name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', grade: 'Ø´Ø´Ù…', class: 'Û¶Û°Û²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 2, name: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ', grade: 'Ø´Ø´Ù…', class: 'Û¶Û°Û²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 3, name: 'Ù…Ø­Ù…Ø¯ Ø­Ø³ÛŒÙ†ÛŒ', grade: 'Ø´Ø´Ù…', class: 'Û¶Û°Û²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 4, name: 'Ø²Ù‡Ø±Ø§ Ú©Ø±ÛŒÙ…ÛŒ', grade: 'Ø´Ø´Ù…', class: 'Û¶Û°Û²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { id: 5, name: 'Ø³Ø§Ø±Ø§ Ø±Ø¶Ø§ÛŒÛŒ', grade: 'Ø´Ø´Ù…', class: 'Û¶Û°Û²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' }
                    ],
                    newStudent: { name: '', grade: 'Ø´Ø´Ù…', class: '' },
                    // Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª
                    scoreData: { lesson: 'Ø±ÛŒØ§Ø¶ÛŒ', date: new Date().toISOString().split('T')[0] },
                    studentScores: {},
                    teacherScores: [
                        { id: 1, studentName: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', lesson: 'Ø±ÛŒØ§Ø¶ÛŒ', score: 4, date: 'Û±Û´Û°Û²/Û±Û°/Û±Ûµ' },
                        { id: 2, studentName: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ', lesson: 'Ø±ÛŒØ§Ø¶ÛŒ', score: 3.5, date: 'Û±Û´Û°Û²/Û±Û°/Û±Ûµ' },
                        { id: 3, studentName: 'Ù…Ø­Ù…Ø¯ Ø­Ø³ÛŒÙ†ÛŒ', lesson: 'Ø±ÛŒØ§Ø¶ÛŒ', score: 3, date: 'Û±Û´Û°Û²/Û±Û°/Û±Ûµ' },
                        { id: 4, studentName: 'Ø²Ù‡Ø±Ø§ Ú©Ø±ÛŒÙ…ÛŒ', lesson: 'Ø¹Ù„ÙˆÙ…', score: 3.5, date: 'Û±Û´Û°Û²/Û±Û°/Û±Û°' },
                        { id: 5, studentName: 'Ø³Ø§Ø±Ø§ Ø±Ø¶Ø§ÛŒÛŒ', lesson: 'Ø¹Ù„ÙˆÙ…', score: 4, date: 'Û±Û´Û°Û²/Û±Û°/Û±Û°' }
                    ],
                    // Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                    selectedReportStudent: null,
                    selectedReportLesson: 'Ø±ÛŒØ§Ø¶ÛŒ',
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    studentGrades: [
                        { lesson: 'Ø±ÛŒØ§Ø¶ÛŒ', score: 4, classAverage: 3.2, comparison: 'Ø¨Ø§Ù„Ø§ØªØ±', teacherComment: 'Ø¹Ø§Ù„ÛŒ! ØªÙ„Ø§Ø´ Ø´Ù…Ø§ Ù‚Ø§Ø¨Ù„ ØªØ­Ø³ÛŒÙ† Ø§Ø³Øª.' },
                        { lesson: 'Ø¹Ù„ÙˆÙ…', score: 3.5, classAverage: 3.1, comparison: 'Ø¨Ø§Ù„Ø§ØªØ±', teacherComment: 'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ØŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.' },
                        { lesson: 'Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ', score: 3, classAverage: 2.9, comparison: 'Ø¨Ø§Ù„Ø§ØªØ±', teacherComment: 'Ù¾ÛŒØ´Ø±ÙØª Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒØ¯.' },
                        { lesson: 'Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ', score: 2.5, classAverage: 2.8, comparison: 'Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ±', teacherComment: 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´ Ø¨ÛŒØ´ØªØ± Ø¯Ø§Ø±ÛŒØ¯.' },
                        { lesson: 'Ù‡Ù†Ø±', score: 4, classAverage: 3.5, comparison: 'Ø¨Ø§Ù„Ø§ØªØ±', teacherComment: 'Ø®Ù„Ø§Ù‚ÛŒØª Ø¹Ø§Ù„ÛŒ!' },
                        { lesson: 'ÙˆØ±Ø²Ø´', score: 4, classAverage: 3.8, comparison: 'Ø¨Ø§Ù„Ø§ØªØ±', teacherComment: 'ÙˆØ±Ø²Ø´Ú©Ø§Ø± Ø®ÙˆØ¨ÛŒ Ù‡Ø³ØªÛŒØ¯.' }
                    ],
                    studentAverageGrade: 3.5
                };
            },
            mounted() {
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
                this.initCharts();
                
                // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø§Ø³Øª
                const savedUser = localStorage.getItem('darsban_user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.currentPage = 'dashboard';
                    
                    // Ø§Ú¯Ø± Ø¢Ù…ÙˆØ²Ú¯Ø§Ø± Ø§Ø³ØªØŒ ØªØ¨ Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†
                    if (this.currentUser.role === 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±') {
                        this.teacherActiveTab = 'enter-scores';
                    }
                }
                
                // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ²
                this.scoreData.date = new Date().toISOString().split('T')[0];
            },
            methods: {
                login() {
                    const users = [
                        { username: 'admin', password: 'admin', name: 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…', role: 'Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡', school: '' },
                        { username: 'karimi', password: '123', name: 'Ù…Ø­Ù…Ø¯ Ú©Ø±ÛŒÙ…ÛŒ', role: 'Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { username: 'mohammadi', password: '123', name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', role: 'Ù…Ø¹Ø§ÙˆÙ†', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { username: 'ahmadi', password: '123', name: 'ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ', role: 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' },
                        { username: 'student1', password: '123', name: 'Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ', role: 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²', school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ' }
                    ];
                    
                    const foundUser = users.find(u => 
                        u.username === this.loginData.username && 
                        u.password === this.loginData.password
                    );
                    
                    if (foundUser) {
                        this.currentUser = foundUser;
                        this.currentPage = 'dashboard';
                        localStorage.setItem('darsban_user', JSON.stringify(foundUser));
                        
                        // Ø§Ú¯Ø± Ø¢Ù…ÙˆØ²Ú¯Ø§Ø± Ø§Ø³ØªØŒ ØªØ¨ Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†
                        if (this.currentUser.role === 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±') {
                            this.teacherActiveTab = 'enter-scores';
                        }
                    } else {
                        alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!');
                    }
                },
                
                logout() {
                    this.currentPage = 'login';
                    this.currentUser = { username: '', name: '', role: '', school: '' };
                    localStorage.removeItem('darsban_user');
                },
                
                // Ù…Ø¯ÛŒØ± Ø³Ø§Ù…Ø§Ù†Ù‡
                addSchool() {
                    if (!this.newSchool.name.trim()) {
                        alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    const newId = this.schools.length > 0 ? Math.max(...this.schools.map(s => s.id)) + 1 : 1;
                    const newCode = 'SCH' + String(newId).padStart(3, '0');
                    
                    this.schools.push({
                        id: newId,
                        name: this.newSchool.name,
                        code: newCode
                    });
                    
                    this.newSchool.name = '';
                    alert('Ù…Ø¯Ø±Ø³Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯');
                    this.initCharts();
                },
                
                editSchool(school) {
                    this.editingSchool = { ...school };
                    const modal = new bootstrap.Modal(document.getElementById('editSchoolModal'));
                    modal.show();
                },
                
                updateSchool() {
                    const index = this.schools.findIndex(s => s.id === this.editingSchool.id);
                    if (index !== -1) {
                        this.schools[index].name = this.editingSchool.name;
                    }
                },
                
                deleteSchool(id) {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù…Ø¯Ø±Ø³Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                        this.schools = this.schools.filter(s => s.id !== id);
                        this.initCharts();
                    }
                },
                
                addUser() {
                    if (!this.newUser.username.trim() || !this.newUser.password.trim() || !this.newUser.fullname.trim()) {
                        alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    const newId = this.users.length > 0 ? Math.max(...this.users.map(u => u.id)) + 1 : 1;
                    
                    this.users.push({
                        id: newId,
                        username: this.newUser.username,
                        fullname: this.newUser.fullname,
                        role: this.newUser.role,
                        school: this.newUser.school
                    });
                    
                    this.newUser = { username: '', password: '', fullname: '', role: 'Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±', school: '' };
                    alert('Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯');
                    this.initCharts();
                },
                
                editUser(user) {
                    this.editingUser = { ...user };
                    const modal = new bootstrap.Modal(document.getElementById('editUserModal'));
                    modal.show();
                },
                
                updateUser() {
                    const index = this.users.findIndex(u => u.id === this.editingUser.id);
                    if (index !== -1) {
                        this.users[index] = { ...this.editingUser };
                    }
                },
                
                deleteUser(id) {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                        this.users = this.users.filter(u => u.id !== id);
                        this.initCharts();
                    }
                },
                
                // Ù…Ø¯ÛŒØ± Ù…Ø¯Ø±Ø³Ù‡
                addTeacher() {
                    if (!this.newTeacher.username.trim() || !this.newTeacher.password.trim() || !this.newTeacher.fullname.trim()) {
                        alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    const newId = this.schoolTeachers.length > 0 ? Math.max(...this.schoolTeachers.map(t => t.id)) + 1 : 1;
                    
                    this.schoolTeachers.push({
                        id: newId,
                        username: this.newTeacher.username,
                        fullname: this.newTeacher.fullname
                    });
                    
                    this.newTeacher = { username: '', password: '', fullname: '' };
                    alert('Ø¢Ù…ÙˆØ²Ú¯Ø§Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯');
                },
                
                loadTeacherReport() {
                    this.teacherReportData = {
                        studentCount: Math.floor(Math.random() * 30) + 10,
                        averageGrade: (Math.random() * 2 + 2).toFixed(1)
                    };
                    
                    setTimeout(() => {
                        this.initTeacherPerformanceChart();
                    }, 100);
                },
                
                // Ø³ÛŒØ³ØªÙ… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ùˆ Ù†Ù…Ø±Ø§Øª
                addStudent() {
                    if (!this.newStudent.name.trim() || !this.newStudent.class.trim()) {
                        alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ùˆ Ú©Ù„Ø§Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                        return;
                    }
                    
                    const newId = this.teacherStudents.length > 0 ? Math.max(...this.teacherStudents.map(s => s.id)) + 1 : 1;
                    
                    this.teacherStudents.push({
                        id: newId,
                        name: this.newStudent.name,
                        grade: this.newStudent.grade,
                        class: this.newStudent.class,
                        school: 'Ø¯Ø¨Ø³ØªØ§Ù† Ø´Ù‡ÛŒØ¯ ØµØ¯ÙˆÙ‚ÛŒ'
                    });
                    
                    this.newStudent = { name: '', grade: 'Ø´Ø´Ù…', class: '' };
                    alert('Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
                },
                
                deleteStudent(id) {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                        this.teacherStudents = this.teacherStudents.filter(s => s.id !== id);
                        // Ø­Ø°Ù Ù†Ù…Ø±Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                        this.teacherScores = this.teacherScores.filter(score => {
                            const student = this.teacherStudents.find(s => s.name === score.studentName);
                            return student;
                        });
                    }
                },
                
                viewStudentScores(student) {
                    this.selectedReportStudent = student;
                    this.teacherActiveTab = 'reports';
                },
                
                // Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª
                getPerformanceLevel(score) {
                    if (score >= 3.5) return 'level-excellent';
                    if (score >= 2.5) return 'level-good';
                    if (score >= 1.5) return 'level-average';
                    return 'level-poor';
                },
                
                getPerformanceText(score) {
                    if (score >= 3.5) return 'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨';
                    if (score >= 2.5) return 'Ø®ÙˆØ¨';
                    if (score >= 1.5) return 'Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„';
                    return 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´';
                },
                
                submitScore(studentId, score) {
                    if (!score || score < 1 || score > 4) {
                        alert('Ù†Ù…Ø±Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û± ØªØ§ Û´ Ø¨Ø§Ø´Ø¯');
                        return;
                    }
                    
                    const student = this.teacherStudents.find(s => s.id === studentId);
                    if (!student) return;
                    
                    const newId = this.teacherScores.length > 0 ? Math.max(...this.teacherScores.map(s => s.id)) + 1 : 1;
                    const today = new Date();
                    const dateStr = `${today.getFullYear()}/${today.getMonth() + 1}/${today.getDate()}`;
                    
                    this.teacherScores.push({
                        id: newId,
                        studentName: student.name,
                        lesson: this.scoreData.lesson,
                        score: parseFloat(score),
                        date: dateStr
                    });
                    
                    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯ Ù†Ù…Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    this.$set(this.studentScores, studentId, '');
                    
                    alert(`Ù†Ù…Ø±Ù‡ ${score} Ø¨Ø±Ø§ÛŒ ${student.name} Ø¯Ø± Ø¯Ø±Ø³ ${this.scoreData.lesson} Ø«Ø¨Øª Ø´Ø¯`);
                },
                
                deleteScore(scoreId) {
                    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù†Ù…Ø±Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                        this.teacherScores = this.teacherScores.filter(s => s.id !== scoreId);
                    }
                },
                
                // Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¢Ù…Ø§Ø±ÛŒ
                calculateClassAverage() {
                    if (this.teacherScores.length === 0) return 0;
                    const sum = this.teacherScores.reduce((total, score) => total + score.score, 0);
                    return (sum / this.teacherScores.length).toFixed(1);
                },
                
                calculatePassPercentage() {
                    if (this.teacherScores.length === 0) return 0;
                    const passCount = this.teacherScores.filter(score => score.score >= 2.5).length;
                    return Math.round((passCount / this.teacherScores.length) * 100);
                },
                
                getTopStudent() {
                    if (this.teacherScores.length === 0) return '--';
                    
                    const studentAverages = {};
                    const studentCounts = {};
                    
                    this.teacherScores.forEach(score => {
                        if (!studentAverages[score.studentName]) {
                            studentAverages[score.studentName] = 0;
                            studentCounts[score.studentName] = 0;
                        }
                        studentAverages[score.studentName] += score.score;
                        studentCounts[score.studentName] += 1;
                    });
                    
                    let topStudent = '';
                    let topAverage = 0;
                    
                    for (const student in studentAverages) {
                        const average = studentAverages[student] / studentCounts[student];
                        if (average > topAverage) {
                            topAverage = average;
                            topStudent = student;
                        }
                    }
                    
                    return topStudent.split(' ')[0]; // ÙÙ‚Ø· Ù†Ø§Ù… Ú©ÙˆÚ†Ú©
                },
                
                // Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                generateStudentReport(student) {
                    alert(`Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø±Ø§ÛŒ ${student.name} Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯. Ø³ÛŒØ³ØªÙ… Ú†Ø§Ù¾ Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.`);
                    window.print();
                },
                
                // Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù„ Ú©Ù„Ø§Ø³
                generateClassReport() {
                    const doc = new jsPDF('p', 'mm', 'a4');
                    
                    // Ù‡Ø¯Ø± Ú¯Ø²Ø§Ø±Ø´
                    doc.setFontSize(20);
                    doc.text('Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„ Ú©Ù„Ø§Ø³', 105, 20, { align: 'center' });
                    
                    doc.setFontSize(12);
                    doc.text(`Ø¢Ù…ÙˆØ²Ú¯Ø§Ø±: ${this.currentUser.name}`, 20, 40);
                    doc.text(`ØªØ§Ø±ÛŒØ®: ${new Date().toLocaleDateString('fa-IR')}`, 20, 50);
                    doc.text(`ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†: ${this.teacherStudents.length}`, 20, 60);
                    doc.text(`Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª Ú©Ù„Ø§Ø³: ${this.calculateClassAverage()}`, 20, 70);
                    
                    // Ø¬Ø¯ÙˆÙ„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                    let y = 90;
                    doc.setFontSize(14);
                    doc.text('Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ùˆ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª', 20, y);
                    y += 10;
                    
                    doc.setFontSize(10);
                    doc.text('Ø±Ø¯ÛŒÙ', 20, y);
                    doc.text('Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²', 40, y);
                    doc.text('Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª', 100, y);
                    doc.text('Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯', 150, y);
                    
                    y += 10;
                    doc.setLineWidth(0.5);
                    doc.line(20, y, 190, y);
                    y += 5;
                    
                    const studentAverages = {};
                    const studentCounts = {};
                    
                    this.teacherScores.forEach(score => {
                        if (!studentAverages[score.studentName]) {
                            studentAverages[score.studentName] = 0;
                            studentCounts[score.studentName] = 0;
                        }
                        studentAverages[score.studentName] += score.score;
                        studentCounts[score.studentName] += 1;
                    });
                    
                    let row = 1;
                    for (const studentName in studentAverages) {
                        const average = (studentAverages[studentName] / studentCounts[studentName]).toFixed(1);
                        const level = this.getPerformanceText(parseFloat(average));
                        
                        doc.text(row.toString(), 20, y);
                        doc.text(studentName, 40, y);
                        doc.text(average, 100, y);
                        doc.text(level, 150, y);
                        
                        y += 10;
                        row++;
                        
                        if (y > 250) {
                            doc.addPage();
                            y = 20;
                        }
                    }
                    
                    // Ø°Ø®ÛŒØ±Ù‡ PDF
                    doc.save(`Ú¯Ø²Ø§Ø±Ø´_Ú©Ù„Ø§Ø³_${this.currentUser.name}.pdf`);
                },
                
                // Ø³ÛŒØ³ØªÙ… Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                getStudentRank() {
                    const ranks = ['Ø§ÙˆÙ„', 'Ø¯ÙˆÙ…', 'Ø³ÙˆÙ…', 'Ú†Ù‡Ø§Ø±Ù…', 'Ù¾Ù†Ø¬Ù…'];
                    return ranks[Math.floor(Math.random() * ranks.length)];
                },
                
                getStudentSummary() {
                    const avg = this.studentAverageGrade;
                    if (avg >= 3.5) {
                        return 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø´Ù…Ø§ Ø¹Ø§Ù„ÛŒ Ø§Ø³Øª! Ø¯Ø± ØªÙ…Ø§Ù… Ø¯Ø±ÙˆØ³ Ù¾ÛŒØ´Ø±ÙØª Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒØ¯. Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯.';
                    } else if (avg >= 3) {
                        return 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø´Ù…Ø§ Ø®ÙˆØ¨ Ø§Ø³Øª. Ø¯Ø± Ø¨Ø±Ø®ÛŒ Ø¯Ø±ÙˆØ³ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ØªØ± Ø¹Ù…Ù„ Ú©Ù†ÛŒØ¯.';
                    } else if (avg >= 2.5) {
                        return 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø´Ù…Ø§ Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„ Ø§Ø³Øª. Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´ Ø¨ÛŒØ´ØªØ± Ø¯Ø± Ø¨Ø±Ø®ÛŒ Ø¯Ø±ÙˆØ³ Ø¯Ø§Ø±ÛŒØ¯.';
                    } else {
                        return 'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´ Ø¬Ø¯ÛŒâ€ŒØªØ±ÛŒ Ø¯Ø§Ø±ÛŒØ¯. Ø¨Ø§ Ù…Ø¹Ù„Ù… Ø®ÙˆØ¯ Ù…Ø´ÙˆØ±Øª Ú©Ù†ÛŒØ¯.';
                    }
                },
                
                downloadReportCard() {
                    const element = document.getElementById('reportCardContent');
                    
                    html2canvas(element, {
                        scale: 2,
                        useCORS: true,
                        logging: false,
                        backgroundColor: '#ffffff'
                    }).then(canvas => {
                        const imgData = canvas.toDataURL('image/png');
                        const pdf = new jsPDF('p', 'mm', 'a4');
                        const imgWidth = 190;
                        const imgHeight = canvas.height * imgWidth / canvas.width;
                        
                        pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                        pdf.save(`Ú©Ø§Ø±Ù†Ø§Ù…Ù‡_${this.currentUser.name}.pdf`);
                    });
                },
                
                // Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§
                initCharts() {
                    // Ù†Ù…ÙˆØ¯Ø§Ø± ØªÙˆØ²ÛŒØ¹ Ù†Ù‚Ø´â€ŒÙ‡Ø§
                    const roleCtx = document.getElementById('roleDistributionChart');
                    if (roleCtx) {
                        const roleCounts = {};
                        this.users.forEach(user => {
                            roleCounts[user.role] = (roleCounts[user.role] || 0) + 1;
                        });
                        
                        new Chart(roleCtx.getContext('2d'), {
                            type: 'pie',
                            data: {
                                labels: Object.keys(roleCounts),
                                datasets: [{
                                    data: Object.values(roleCounts),
                                    backgroundColor: ['#4A90E2', '#FFC107', '#28A745', '#DC3545', '#6C757D']
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    legend: { position: 'bottom' }
                                }
                            }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± ØªÙˆØ²ÛŒØ¹ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§
                    const gradeCtx = document.getElementById('gradeDistributionChart');
                    if (gradeCtx) {
                        new Chart(gradeCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: ['Ø§ÙˆÙ„', 'Ø¯ÙˆÙ…', 'Ø³ÙˆÙ…', 'Ú†Ù‡Ø§Ø±Ù…', 'Ù¾Ù†Ø¬Ù…', 'Ø´Ø´Ù…'],
                                datasets: [{
                                    label: 'ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†',
                                    data: [45, 52, 48, 55, 60, 58],
                                    backgroundColor: '#4A90E2'
                                }]
                            },
                            options: { responsive: true }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± Ù¾ÛŒØ´Ø±ÙØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    const progressCtx = document.getElementById('studentProgressChart');
                    if (progressCtx && this.selectedReportStudent) {
                        const studentScores = this.teacherScores
                            .filter(s => s.studentName === this.selectedReportStudent.name)
                            .slice(-5);
                        
                        new Chart(progressCtx.getContext('2d'), {
                            type: 'line',
                            data: {
                                labels: studentScores.map((s, i) => `Ù†Ù…Ø±Ù‡ ${i+1}`),
                                datasets: [{
                                    label: `Ù¾ÛŒØ´Ø±ÙØª ${this.selectedReportStudent.name}`,
                                    data: studentScores.map(s => s.score),
                                    borderColor: '#4A90E2',
                                    backgroundColor: 'rgba(74, 144, 226, 0.1)',
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { min: 1, max: 4 }
                                }
                            }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    const performanceCtx = document.getElementById('studentPerformanceChart');
                    if (performanceCtx && this.selectedReportStudent) {
                        const studentScores = this.teacherScores
                            .filter(s => s.studentName === this.selectedReportStudent.name);
                        
                        const levelCounts = {
                            'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨': 0,
                            'Ø®ÙˆØ¨': 0,
                            'Ù‚Ø§Ø¨Ù„ Ù‚Ø¨ÙˆÙ„': 0,
                            'Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´': 0
                        };
                        
                        studentScores.forEach(score => {
                            levelCounts[this.getPerformanceText(score.score)]++;
                        });
                        
                        new Chart(performanceCtx.getContext('2d'), {
                            type: 'doughnut',
                            data: {
                                labels: Object.keys(levelCounts),
                                datasets: [{
                                    data: Object.values(levelCounts),
                                    backgroundColor: ['#28A745', '#4A90E2', '#FFC107', '#DC3545']
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    legend: { position: 'bottom' }
                                }
                            }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± Ú©Ù„ÛŒ Ú©Ù„Ø§Ø³
                    const classCtx = document.getElementById('classOverallChart');
                    if (classCtx) {
                        const lessonAverages = {};
                        const lessonCounts = {};
                        
                        this.teacherScores.forEach(score => {
                            if (!lessonAverages[score.lesson]) {
                                lessonAverages[score.lesson] = 0;
                                lessonCounts[score.lesson] = 0;
                            }
                            lessonAverages[score.lesson] += score.score;
                            lessonCounts[score.lesson] += 1;
                        });
                        
                        const lessons = Object.keys(lessonAverages);
                        const averages = lessons.map(lesson => 
                            (lessonAverages[lesson] / lessonCounts[lesson]).toFixed(1)
                        );
                        
                        new Chart(classCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: lessons,
                                datasets: [{
                                    label: 'Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª',
                                    data: averages,
                                    backgroundColor: '#4A90E2'
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { min: 1, max: 4 }
                                }
                            }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± Ù†Ù…Ø±Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    const studentGradesCtx = document.getElementById('studentGradesChart');
                    if (studentGradesCtx) {
                        new Chart(studentGradesCtx.getContext('2d'), {
                            type: 'radar',
                            data: {
                                labels: this.studentGrades.map(g => g.lesson),
                                datasets: [{
                                    label: 'Ù†Ù…Ø±Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²',
                                    data: this.studentGrades.map(g => g.score),
                                    backgroundColor: 'rgba(74, 144, 226, 0.2)',
                                    borderColor: '#4A90E2'
                                }]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    r: { min: 1, max: 4 }
                                }
                            }
                        });
                    }
                    
                    // Ù†Ù…ÙˆØ¯Ø§Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ú©Ù„Ø§Ø³
                    const comparisonCtx = document.getElementById('studentComparisonChart');
                    if (comparisonCtx) {
                        new Chart(comparisonCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: this.studentGrades.map(g => g.lesson),
                                datasets: [
                                    {
                                        label: 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²',
                                        data: this.studentGrades.map(g => g.score),
                                        backgroundColor: '#4A90E2'
                                    },
                                    {
                                        label: 'Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ú©Ù„Ø§Ø³',
                                        data: this.studentGrades.map(g => g.classAverage),
                                        backgroundColor: '#FFC107'
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                scales: {
                                    y: { min: 1, max: 4 }
                                }
                            }
                        });
                    }
                },
                
                initTeacherPerformanceChart() {
                    const teacherCtx = document.getElementById('teacherPerformanceChart');
                    if (teacherCtx) {
                        new Chart(teacherCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: ['Ù…Ù‡Ø±', 'Ø¢Ø¨Ø§Ù†', 'Ø¢Ø°Ø±', 'Ø¯ÛŒ', 'Ø¨Ù‡Ù…Ù†', 'Ø§Ø³ÙÙ†Ø¯'],
                                datasets: [{
                                    label: 'Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª Ú©Ù„Ø§Ø³',
                                    data: [2.8, 3.1, 3.3, 3.4, 3.5, 3.6],
                                    backgroundColor: '#4A90E2'
                                }]
                            },
                            options: { responsive: true }
                        });
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
